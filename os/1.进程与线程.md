![并发与并行](E:\076lxl\work\note4c\os\assets\5-并发与并行.jpg)

线程( Thread)

- 实体之间可以并发运行

- 实体之间共享相同的地址空间

线程是进程当中的一条执行流程。
同一个进程内多个线程之间可以共享代码段、数据段、打开的文件等资源，但每个线程各自都有一套独立的寄存器和栈，这样可以确保线程的控制流是相对独立的。



线程与进程的比较

- 进程是资源(包括内存、打开的文件等)分配的单位，线程是CPU 调度的单位
- 进程拥有一个完整的资源平台，而线程只独享必不可少的资源，如寄存器和栈
- 线程同样具有就绪、阻塞、执行三种基本状态，同样具有状态之间的转换关系;线程能减少并发执行的时间和空间开销;



- 线程的创建时间比进程快，因为进程在创建的过程中，还需要资源管理信息，比如内存管理信息、文件管理信息，而线程在创建的过程中，不会涉及这些资源管理信息，而是共享它们;线程的终止时间比进程快，因为线程释放的资源相比进程少很多;
- 同一个进程内的线程切换比进程切换快，因为线程具有相同的地址空间(虚拟内存共享)，这意味着同一个进程的线程都具有同一个页表，那么在切换的时候不需要切换页表。而对于进程之间的切换，切换的时候要把页表给切换掉，而页表的切换过程开销是比较大的;
- 由于同一进程的各线程间共享内存和文件资源，那么在**线程之间数据传递的时候，就不需要经过内核**了，这就使得线程之间的数据交互效率更高了;

所以，不管是时间效率，还是空间效率线程比进程都要高。