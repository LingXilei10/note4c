```cpp
class Solution {
public:
    
    int longestValidParentheses(string s) {
        int ans=0;
        stack<int> myst;
        for(int i=0;i<s.size();i++){

            if(s[i]==')'&&myst.size()&&s[myst.top()]=='('){
                myst.pop();
                if(myst.size()) ans=max(ans,i-myst.top());
                else ans=i+1;
            }
            
            else{
                myst.push(i);
            }
        }
        return ans;
    }
};

最主要是去将索引值压栈，而不是讲括号。利用索引值就能知道之前的字符，并且很方便计算差值，获取ans。
