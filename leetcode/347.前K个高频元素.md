[347. å‰ K ä¸ªé«˜é¢‘å…ƒç´  - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/top-k-frequent-elements/description/)

## è‡ªå·±





## labuladong

é¦–å…ˆï¼Œè‚¯å®šè¦ç”¨ä¸€ä¸ª `valToFreq` å“ˆå¸Œè¡¨æŠŠæ¯ä¸ªå…ƒç´ å‡ºç°çš„é¢‘ç‡è®¡ç®—å‡ºæ¥ã€‚

ç„¶åï¼Œè¿™é“é¢˜å°±å˜æˆäº† [215. æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-an-array)ï¼Œåªä¸è¿‡ç¬¬ 215 é¢˜è®©ä½ æ±‚æ•°ç»„ä¸­å…ƒç´ å€¼ `e` æ’åœ¨ç¬¬ `k` å¤§çš„é‚£ä¸ªå…ƒç´ ï¼Œè¿™é“é¢˜è®©ä½ æ±‚æ•°ç»„ä¸­å…ƒç´ å€¼ `valToFreq[e]` æ’åœ¨å‰ `k` ä¸ªçš„å…ƒç´ ã€‚

æˆ‘åœ¨ [å¿«é€Ÿæ’åºè¯¦è§£åŠè¿ç”¨](https://labuladong.online/algo/practice-in-action/quick-sort/) ä¸­è®²è¿‡ç¬¬ 215 é¢˜ï¼Œå¯ä»¥ç”¨ [ä¼˜å…ˆçº§é˜Ÿåˆ—](https://labuladong.online/algo/data-structure-basic/binary-heap-basic/) æˆ–è€…å¿«é€Ÿé€‰æ‹©ç®—æ³•è§£å†³è¿™é“é¢˜ã€‚è¿™é‡Œç¨å¾®æ”¹ä¸€ä¸‹ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ¯”è¾ƒå‡½æ•°ï¼Œæˆ–è€…æ”¹ä¸€ä¸‹å¿«é€Ÿé€‰æ‹©ç®—æ³•ä¸­çš„é€»è¾‘å³å¯ã€‚

è¿™é‡Œæˆ‘å†åŠ ä¸€ç§è§£æ³•ï¼Œç”¨è®¡æ•°æ’åºçš„æ–¹å¼æ‰¾åˆ°å‰ `k` ä¸ªé«˜é¢‘å…ƒç´ ï¼Œè§ä»£ç ã€‚

**è¯¦ç»†é¢˜è§£**ï¼š

- [ã€å¼ºåŒ–ç»ƒä¹ ã€‘ä¼˜å…ˆçº§é˜Ÿåˆ—ç»å…¸ä¹ é¢˜](https://labuladong.online/algo/problem-set/binary-heap/)

## è§£æ³•ä»£ç 

```cpp
// æ³¨æ„ï¼šcpp ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ã€‚
// æœ¬ä»£ç çš„æ­£ç¡®æ€§å·²é€šè¿‡åŠ›æ‰£éªŒè¯ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œå¯ä»¥å¯¹ç…§ java ä»£ç æŸ¥çœ‹ã€‚

// ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—è§£å†³è¿™é“é¢˜
class Solution {
public:
    vector<int> topKFrequent(vector<int>& nums, int k) {
        // nums ä¸­çš„å…ƒç´  -> è¯¥å…ƒç´ å‡ºç°çš„é¢‘ç‡
        unordered_map<int, int> valToFreq;
        for (int v : nums) {
            valToFreq[v]++;
        }

        auto cmp = [](pair<int, int>& entry1, pair<int, int>& entry2) {
            // é˜Ÿåˆ—æŒ‰ç…§é”®å€¼å¯¹ä¸­çš„å€¼ï¼ˆå…ƒç´ å‡ºç°é¢‘ç‡ï¼‰ä»å°åˆ°å¤§æ’åº
            return entry1.second > entry2.second;
        };
        priority_queue<pair<int, int>, vector<pair<int, int>>, decltype(cmp)> pq(cmp);

        for (auto& entry : valToFreq) {
            pq.push(entry);
            if (pq.size() > k) {
                // å¼¹å‡ºæœ€å°å…ƒç´ ï¼Œç»´æŠ¤é˜Ÿåˆ—å†…æ˜¯ k ä¸ªé¢‘ç‡æœ€å¤§çš„å…ƒç´ 
                pq.pop();
            }
        }

        vector<int> res(k);
        for (int i = k - 1; i >= 0; i--) {
            // res æ•°ç»„ä¸­å­˜å‚¨å‰ k ä¸ªæœ€å¤§å…ƒç´ 
            res[i] = pq.top().first;
            pq.pop();
        }

        return res;
    }
};

// ç”¨è®¡æ•°æ’åºçš„æ–¹æ³•è§£å†³è¿™é“é¢˜
class Solution2 {
public:
    vector<int> topKFrequent(vector<int>& nums, int k) {
        // nums ä¸­çš„å…ƒç´  -> è¯¥å…ƒç´ å‡ºç°çš„é¢‘ç‡
        unordered_map<int, int> valToFreq;
        for (int v : nums) {
            valToFreq[v]++;
        }

        // é¢‘ç‡ -> è¿™ä¸ªé¢‘ç‡æœ‰å“ªäº›å…ƒç´ 
        vector<vector<int>> freqToVals(nums.size() + 1);
        for (auto& entry : valToFreq) {
            int freq = entry.second;
            freqToVals[freq].push_back(entry.first);
        }

        vector<int> res(k);
        int p = 0;
        // freqToVals ä»åå¾€å‰å­˜å‚¨ç€å‡ºç°æœ€å¤šçš„å…ƒç´ 
        for (int i = freqToVals.size() - 1; i > 0; i--) {
            for (int val : freqToVals[i]) {
                // å°†å‡ºç°æ¬¡æ•°æœ€å¤šçš„ k ä¸ªå…ƒç´ è£…å…¥ res
                res[p] = val;
                p++;
                if (p == k) {
                    return res;
                }
            }
        }

        return {};
    }
};
```