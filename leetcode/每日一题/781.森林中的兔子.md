### 贪心

两只相同颜色的兔子看到的其他同色兔子数必然是相同的。反之，若两只兔子看到的其他同色兔子数不同，那么这两只兔子颜色也不同。

因此，将 answers 中值相同的元素分为一组，对于每一组，计算出兔子的最少数量，然后将所有组的计算结果累加，就是最终的答案。

例如，现在有 13 只兔子回答 5。假设其中有一只红色的兔子，那么森林中必然有 6 只红兔子。再假设其中还有一只蓝色的兔子，同样的道理森林中必然有 6 只蓝兔子。为了最小化可能的兔子数量，我们假设这 12 只兔子都在这 13 只兔子中。那么还有一只额外的兔子回答 5，这只兔子只能是其他的颜色，这一颜色的兔子也有 6 只。因此这种情况下最少会有 18 只兔子。

一般地，如果有 x 只兔子都回答 y，则至少有celi(x/(y+1))种不同的颜色，且每种颜色有 y+1 只兔子，因此兔子数至少为
$$
⌈x/(y+1)⌉⋅(y+1)
$$
我们可以用哈希表统计 answers 中各个元素的出现次数，对每个元素套用上述公式计算，并将计算结果累加，即为最终答案。

### 代码

```cpp
class Solution {
public:
    int numRabbits(vector<int> &answers) {
        unordered_map<int, int> count;
        for (int y : answers) {
            ++count[y];
        }
        int ans = 0;
        for (auto &[y, x] : count) {
            ans += (x + y) / (y + 1) * (y + 1);
        }
        return ans;
    }
};
```

### 复杂度分析

时间复杂度：O(n)，其中 n 是数组 answers 的长度。

空间复杂度：O(n)。最坏情况下，哈希表中含有 n 个元素。



其中，在 `(x + y) / (y + 1) * (y + 1)` 这个表达式中，`x + y` 的作用是 **向上取整**，确保计算出的兔子数量足够容纳所有相同回答的兔子。

### **为什么是 `x + y`？**

1. **问题背景**：

   - 每只兔子回答的数字 `y` 表示 **其他和自己同颜色的兔子数量**。
   - 因此，**同一种颜色的兔子总数** = `y + 1`（包括自己）。
   - 例如，如果 `y = 5`，说明该颜色的兔子共有 `6` 只（自己 + 5 只同色兔子）。

2. **计算最少兔子数量**：

   - 如果有 `x` 只兔子回答 `y`，那么它们可能属于多个颜色组。
   - **最少需要 `ceil(x / (y + 1))` 个颜色组**，才能容纳所有回答 `y` 的兔子。
   - 例如，`x = 8` 只兔子回答 `y = 5`，则最少需要 `ceil(8 / 6) = 2` 组，每组 `6` 只兔子（共 `12` 只）。

3. **`(x + y) / (y + 1)` 实现向上取整**：

   - 数学上，**`ceil(a / b) = (a + b - 1) / b`。**

   - 这里 `a = x`，`b = y + 1`，所以 `ceil(x / (y + 1)) = (x + y) / (y + 1)`。

   - 例如，

     ```
     x = 8,y = 5;
     ```

     - `(8 + 5) / (5 + 1) = 13 / 6 = 2`（整数除法）。

   - 最后 `* (y + 1)` 计算总兔子数（`2 * 6 = 12`）。
